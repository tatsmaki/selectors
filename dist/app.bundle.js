(()=>{"use strict";const e={A:[{element:"water",animation:!0},{element:"water",animation:!0}],B:[{element:"fire",animation:!0},{element:"water",animation:!1},{element:"fire",animation:!0}],"#id":[{element:"water",animation:!1},{element:"water",animation:!0,id:"frozen"},{element:"frost",animation:!1}],"*":[{element:"water",animation:!0},{element:"fire",animation:!0},{element:"frost",animation:!0}],"A, B":[{element:"fire",animation:!1},{element:"water",animation:!0},{element:"lightning",animation:!0},{element:"frost",animation:!1}],"A ~ B":[{element:"water",animation:!1},{element:"fire",animation:!1},{element:"water",animation:!0,id:"frozen"},{element:"water",animation:!0},{element:"frost",animation:!1}]},t={A:"water",B:"fire","#id":"#frozen","*":"*","A, B":"water,lightning","A ~ B":"fire~water"},n={A:"Select water",B:"Select fire","#id":"Select frozen water","*":"Select everything","A, B":"Select water and lightning","A ~ B":"Select water beside fire"},i=function(e){return e.replace(/><\/\w+>/g," />\n").replace(/ class="stop"/g,"")};function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const r=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.main=null,this.userInterfaceFragment=document.createDocumentFragment(),this.quest=document.createElement("p"),this.screen=document.createElement("div"),this.codeCSS=document.createElement("input"),this.codeHTML=document.createElement("div"),this.menu=document.createElement("button"),this.menuScreen=document.createElement("div"),this.selector=""}var s,c;return s=r,(c=[{key:"loadLevel",value:function(e){var t=document.createDocumentFragment();e.forEach((function(e){var n=document.createElement(e.element);e.animation||n.classList.add("stop"),e.id&&n.setAttribute("id",e.id),t.appendChild(n)})),this.main=t}},{key:"createDocument",value:function(t,a){var r=this;this.currentLevel=t,this.selector=a,this.quest.classList.add("quest"),this.screen.classList.add("screen"),this.codeCSS.classList.add("codeCSS"),this.codeHTML.classList.add("codeHTML"),this.menu.classList.add("menu"),this.menuScreen.classList.add("menuScreen"),this.quest.textContent=n[this.currentLevel],this.screen.appendChild(this.main),this.codeCSS.placeholder="Type CSS selector here",this.codeHTML.innerText=i(this.screen.innerHTML),this.menu.innerHTML="<i class='material-icons'>menu</i>",this.menu.addEventListener("click",(function(){r.toggleMenu()}));var s=document.createElement("ol");Object.keys(e).forEach((function(e){var t=document.createElement("li");t.textContent=e,t.addEventListener("click",(function(){r.currentLevel=e,r.loadNextLevel(e),r.saveToLocal(),r.toggleMenu()})),s.appendChild(t)})),this.menuScreen.appendChild(s),this.userInterfaceFragment.appendChild(this.quest),this.userInterfaceFragment.appendChild(this.screen),this.userInterfaceFragment.appendChild(this.codeCSS),this.userInterfaceFragment.appendChild(this.codeHTML),this.userInterfaceFragment.appendChild(this.menu),this.userInterfaceFragment.appendChild(this.menuScreen),document.body.appendChild(this.userInterfaceFragment)}},{key:"loadNextLevel",value:function(a){this.loadLevel(e[a]),this.screen.innerHTML="",this.screen.appendChild(this.main),this.codeHTML.innerText=i(this.screen.innerHTML),this.selector=t[a],this.quest.textContent=n[this.currentLevel]}},{key:"saveToLocal",value:function(){localStorage.setItem("tatsmaki-JS2020Q3-currentLevel",this.currentLevel)}},{key:"toggleMenu",value:function(){this.menuStatus?this.menuScreen.style.top="-100vh":this.menuScreen.style.top=0,this.menuStatus=!this.menuStatus}},{key:"selectorCheck",value:function(){var t=this;if(this.codeCSS.value.replace(/ /g,"")===this.selector){this.codeCSS.value="",this.screen.querySelectorAll(this.selector).forEach((function(e){e.animate([{marginTop:"-100vh"}],{duration:1e3,easing:"ease"})}));var n=Object.keys(e),i=n[n.indexOf(this.currentLevel)+1];setTimeout((function(){i?t.loadNextLevel(i):(t.screen.innerHTML="",t.quest.textContent="Game End",t.screen.style.color="white",localStorage.clear())}),1e3),this.currentLevel=i,this.saveToLocal()}else this.screen.querySelectorAll(this.codeCSS.value).forEach((function(e){e.animate([{marginTop:0},{marginTop:"-20px"},{marginTop:0},{marginTop:"20px"},{marginTop:0},{marginTop:"-20px"},{marginTop:0},{marginTop:"20px"},{marginTop:0}],{duration:1e3,easing:"ease"})}))}}])&&a(s.prototype,c),r}();var s="A";localStorage.getItem("tatsmaki-JS2020Q3-currentLevel")&&(s=localStorage.getItem("tatsmaki-JS2020Q3-currentLevel"));var c=e[s],o=t[s],l=new r;l.loadLevel(c),l.createDocument(s,o),window.addEventListener("keydown",(function(e){13===e.which&&l.selectorCheck()}))})();
//# sourceMappingURL=app.bundle.js.map